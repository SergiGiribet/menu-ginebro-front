<div class="py-16">
  <div class="flex bg-white rounded-lg shadow-lg overflow-hidden mx-auto max-w-sm lg:max-w-4xl">
    <div class="hidden lg:block lg:w-1/2 bg-cover"
      style="background-image:url('https://www.ginebro.cat/web2/wp-content/uploads/2024/09/Escola-Ginebro-Formem-persones-1920x920-1.jpg')">
    </div>
    <div class="w-full p-8 lg:w-1/2">
      <div class="text-center mb-6">
        <img src="/images/logos/ginebro-logo.png" alt="Ginebro Logo" class="mx-auto h-12 mb-2">
        <h2 class="text-2xl font-semibold text-gray-700">Recuperar contrasenya</h2>
        <p class="text-sm text-gray-600">Introdueix el teu correu per rebre un codi de verificació</p>
      </div>

      <!-- Pas 1: enviar codi -->
      <form *ngIf="step === 1" [formGroup]="emailForm" (ngSubmit)="sendResetCode()">
        <div class="mb-4">
          <label class="block text-gray-700 text-sm font-bold mb-2">Correu electrònic</label>
          <input formControlName="email" type="email"
            class="bg-gray-200 text-gray-700 focus:outline-none focus:shadow-outline border border-gray-300 rounded py-2 px-4 block w-full"
            placeholder="Introdueix el teu correu">
        </div>
        <button type="submit" class="bg-green-500 text-white font-bold py-2 px-4 w-full rounded hover:bg-green-700"
          [disabled]="isSubmitting">
          {{ isSubmitting ? 'Enviant...' : 'Enviar codi' }}
        </button>
      </form>

      <!-- Pas 2: restablir contrasenya -->
      <form *ngIf="step === 2" [formGroup]="resetForm" (ngSubmit)="resetPassword()">
        <!-- <div class="mb-4">
          <label class="block text-gray-700 text-sm font-bold mb-2">Codi de verificació</label>
          <input formControlName="code" type="text"
            class="bg-gray-200 text-gray-700 focus:outline-none focus:shadow-outline border border-gray-300 rounded py-2 px-4 block w-full" placeholder="6 dígits">
        </div> -->

        <div class="mb-4 text-center">
          <label class="block text-gray-700 text-sm font-bold mb-2">Codi de verificació</label>
          <div class="flex items-center justify-center gap-3" (paste)="handlePaste($event)">
            <input *ngFor="let ctrl of otpInputs; let i = index" #otpInput type="text" maxlength="1" pattern="[0-9]*"
              class="w-12 h-12 text-center text-xl font-bold text-slate-900 bg-slate-100 border border-gray-300 rounded focus:outline-none focus:border-indigo-400"
              (input)="onInput($event, i)" (keydown)="onKeyDown($event, i)" (focus)="onFocus($event)" />
          </div>
        </div>


        <div class="mb-4">
          <label class="block text-gray-700 text-sm font-bold mb-2">Nova contrasenya</label>
          <input formControlName="password" type="password"
            class="bg-gray-200 text-gray-700 focus:outline-none focus:shadow-outline border border-gray-300 rounded py-2 px-4 block w-full"
            placeholder="Nova contrasenya">
        </div>

        <div class="mb-4">
          <label class="block text-gray-700 text-sm font-bold mb-2">Confirmació de contrasenya</label>
          <input formControlName="password_confirmation" type="password"
            class="bg-gray-200 text-gray-700 focus:outline-none focus:shadow-outline border border-gray-300 rounded py-2 px-4 block w-full"
            placeholder="Repeteix la contrasenya">
        </div>

        <button type="submit" class="bg-green-500 text-white font-bold py-2 px-4 w-full rounded hover:bg-green-700"
          [disabled]="isSubmitting">
          {{ isSubmitting ? 'Restablint...' : 'Restablir contrasenya' }}
        </button>
      </form>
    </div>
  </div>
</div>