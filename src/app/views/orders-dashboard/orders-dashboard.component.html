<section class="dashboard-container">
  <nav class="tab-navigation" aria-label="Dashboard views">
    <ul class="tab-list">
      <li>
        <button
          class="tab-button"
          [class.active]="activeTab === 'daily'"
          (click)="setActiveTab('daily')"
          [attr.aria-selected]="activeTab === 'daily'"
          role="tab"
        >
          Diario
        </button>
      </li>
      <li>
        <button
          class="tab-button"
          [class.active]="activeTab === 'monthly'"
          (click)="setActiveTab('monthly')"
          [attr.aria-selected]="activeTab === 'monthly'"
          role="tab"
        >
          Mensual
        </button>
      </li>
      <li>
        <button
          class="tab-button"
          [class.active]="activeTab === 'annual'"
          (click)="setActiveTab('annual')"
          [attr.aria-selected]="activeTab === 'annual'"
          role="tab"
        >
          Anual
        </button>
      </li>
      <li>
        <button
          class="tab-button"
          [class.active]="activeTab === 'images'"
          (click)="setActiveTab('images')"
          [attr.aria-selected]="activeTab === 'images'"
          role="tab"
        >
          Imágenes
        </button>
      </li>
    </ul>
  </nav>

  <div class="controls-container">
    <div class="date-selector">
      <button class="calendar-button" aria-label="Open calendar">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
          <path d="M3 4H21V8H3V4Z" stroke="currentColor" strokeWidth="2"></path>
          <path d="M4 8V20H20V8" stroke="currentColor" strokeWidth="2"></path>
          <path d="M8 12H16" stroke="currentColor" strokeWidth="2"></path>
        </svg>
      </button>
      <input
        type="text"
        class="date-input"
        [value]="selectedDate"
        aria-label="Selected date"
      />
    </div>

    <button
      class="export-button"
      aria-label="Export data"
      (click)="exportData()"
    >
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
        <path
          d="M4 16V17C4 18.7 5.3 20 7 20H17C18.7 20 20 18.7 20 17V16"
          stroke="white"
          strokeWidth="2"
        ></path>
        <path
          d="M12 4V16M12 16L8 12M12 16L16 12"
          stroke="white"
          strokeWidth="2"
        ></path>
      </svg>
      <span>Exportar</span>
    </button>
  </div>

  <div class="table-container">
    <table class="orders-table">
      <caption class="sr-only">
        Pedidos de estudiantes
      </caption>
      <thead>
        <tr>
          <th scope="col">ESTUDIANTE</th>
          <th scope="col">CURSO</th>
          <th scope="col">FECHA</th>
          <th scope="col">PRIMER PLATO</th>
          <th scope="col">SEGUNDO PLATO</th>
          <th scope="col">POSTRE</th>
          <th scope="col">TÁPER</th>
        </tr>
      </thead>
      <tbody>
        <ng-container *ngIf="orderHistory.length > 0; else noOrders">
          <tr *ngFor="let item of orderHistory">
            <td>{{ item.student.name }} {{ item.student.lastName }}</td>
            <td>{{ item.order.date }}</td>
            <td>{{ item.firstCourse?.name || "-" }}</td>
            <td>{{ item.secondCourse?.name || "-" }}</td>
            <td>{{ item.dessert?.name || "-" }}</td>
            <td>{{ item.order.tupper || "No" }}</td>
          </tr>
        </ng-container>
        <ng-template #noOrders>
          <tr>
            <td colspan="7" class="empty-state">
              No hay pedidos para el período seleccionado
            </td>
          </tr>
        </ng-template>
      </tbody>
    </table>
  </div>
</section>
